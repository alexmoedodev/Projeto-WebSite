// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TypeCompany {
  CPF
  CNPJ
}

enum TypeLog {
  CADASTRO
  EXCLUSÃO
  EDIÇÃO
  ERROR

}

model User {
  id       String   @id @default(uuid())
  code     Int      @unique @default(autoincrement())
  name     String
  email    String   @unique
  password String
  status Boolean @default(true)
  image    String?
  createdAt DateTime @default(now())
  updateAt DateTime @updatedAt

  company   Company? @relation(fields: [companyId], references: [id])
  companyId String?

  logId Log[]

  @@map("users")
}

model Company {
  id            String      @id @default(uuid())
  typeCompany   TypeCompany @default(CNPJ)
  document      String
  statusCompany String?
  sizeCompany   String?
  rg            String?
  socialRasion  String
  nameFantasy   String

  zipCode      String
  address      String
  number       String
  complement   String?
  neighborhood String
  city         String
  uf           String

  email     String
  phone     String
  phone2    String
  whatsApp  String
  instagran String
  facebook  String
  webSite   String
  image     String

  userId User[]
  logId  Log[]

  @@map("company")
}

model Log {
  id     Int    @id @default(autoincrement())
  action String
  category TypeLog

  user   User?   @relation(fields: [userId], references: [id])
  userId String?

  company   Company? @relation(fields: [companyId], references: [id])
  companyId String?

  createdAt DateTime @default(now())

  @@map("logs")
}
